{"version":3,"sources":["bibliotheca/components/table.cljs"],"mappings":"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","names":["bibliotheca.components.table/sortable-header","field","label","cljs.core/deref","sort","re_frame.core.subscribe","current-field","current-direction","is-current?","cljs.core._EQ_","class","re-frame.core/dispatch","bibliotheca.components.table/tags-cell","tags","iter__5476__auto__","s__25478","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5474__auto__","size__5475__auto__","cljs.core/count","b__25480","cljs.core/chunk-buffer","i__25479","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__25477","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","tag","bibliotheca.components.table/title-cell","item","title","url","and__4996__auto__","cljs.core/empty?","bibliotheca.components.table/truncate-text","text","max-length","cljs.core.subs","bibliotheca.components.table/media-table","filtered-data","s__25507","b__25509","i__25508","iter__25506","cljs.core/chunk-first"],"sourcesContent":["(ns bibliotheca.components.table\n  (:require [re-frame.core :as rf]))\n\n(defn sortable-header [field label]\n  (let [sort @(rf/subscribe [:sort])\n        current-field (:field sort)\n        current-direction (:direction sort)\n        is-current? (= field current-field)\n        class (cond\n                (and is-current? (= current-direction :asc)) \"sortable sorted-asc\"\n                (and is-current? (= current-direction :desc)) \"sortable sorted-desc\"\n                :else \"sortable\")]\n    [:th {:class class\n          :on-click #(rf/dispatch [:set-sort field])}\n     label]))\n\n(defn tags-cell [tags]\n  [:div.tags\n   (for [tag tags]\n     ^{:key tag}\n     [:span.tag tag])])\n\n(defn title-cell [item]\n  (let [title (:title item)\n        url (:url item)]\n    (if (and url (not (empty? url)))\n      [:a.title-link {:href url :target \"_blank\" :rel \"noopener noreferrer\"} title]\n      [:span title])))\n\n(defn truncate-text [text max-length]\n  (if (and text (> (count text) max-length))\n    (str (subs text 0 max-length) \"...\")\n    text))\n\n(defn media-table []\n  (let [filtered-data @(rf/subscribe [:filtered-data])]\n    [:div.media-table\n     [:table\n      [:thead\n       [:tr\n        [sortable-header :title \"Title\"]\n        [sortable-header :author \"Author\"]\n        [sortable-header :year \"Year\"]\n        [sortable-header :mediaType \"Type\"]\n        [:th \"Summary\"]\n        [:th \"Why Recommended\"]\n        [:th \"Tags\"]\n        [sortable-header :stars \"Stars\"]]]\n      [:tbody\n       (for [item filtered-data]\n         ^{:key (str (:title item) (:author item))}\n         [:tr\n          [:td [title-cell item]]\n          [:td (:author item)]\n          [:td (:year item)]\n          [:td (:mediaType item)]\n          [:td.summary-cell (truncate-text (:summary item) 150)]\n          [:td.why-recommended-cell (truncate-text (:whyRecommended item) 150)]\n          [:td [tags-cell (:tags item)]]\n          [:td (:stars item)]])]]]))"]}